osmnx_settings:
  consolidation_tolerance: 15
  network_type: "drive"

server_settings:
  host: "0.0.0.0"
  port: 8050
  debug: true

data_paths:
  data_dir: "./data"
  polygon_path: "./data/polygon.geojson"
  streets_path: "./data/streets.geojson"
  buildings_path: "./data/buildings.geojson"
  filtered_buildings_path: "./data/filtered_buildings.geojson"
  network_path: "./data/heating_network.geojson"
  network_graphml_path: "./data/heating_network.graphml"
  filtered_network_graphml_path: "./data/filtered_heating_network.graphml"
  filtered_network_path: "./data/filtered_heating_network.geojson"
  heat_sources_path: "./data/heat_sources.geojson"

heat_demand:
  gdb_path: "/gdb/GDB.gdb"
  gdb_layer: "Raumwaermebedarf_ist"
  heat_demand_column: "RW"

coordinate_system:
  target_crs: "EPSG:5243"
  input_crs: "EPSG:4326"

map_settings:
  default_center: [50.9413, 6.9572]
  default_zoom: 15
  tile_url: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
  attribution: "© OpenStreetMap contributors"
  measure_settings:
    position: "topleft"
    primary_length_unit: "meters"
    primary_area_unit: "sqmeters"
    active_color: "blue"
    completed_color: "rgba(0, 0, 255, 0.6)"

building_filters:
  exclude_zero_heat_demand: true
  min_heat_demand: ""
  max_heat_demand: ""
  postcodes: [""]
  cities: [""]
  building_uses: [""]

building_clustering:
  auto_apply: true

graph_filters:
  max_building_connection_distance: 20.0
  default_pruning_algorithm: "minimum_spanning_tree"
  pruning_algorithms:
    minimum_spanning_tree:
    all_building_connections:
    steiner_tree:

pandapipes:
  # Fluid properties
  fluid: "water"
  supply_temperature_C: 130.0
  return_temperature_C: 50.0
  delta_T_K: 30.0
  cp_J_per_kgK: 4180.0
  rho_kg_per_m3: 985.0
  
  # Junction and pressure settings
  min_junction_pressure_bar: 1.5
  circ_pump_pressure_bar: 20.0
  min_mass_flow_kg_per_s: 0.01
  
  # Pipe defaults
  roughness_m: 1.0e-4
  min_pipe_length_m: 1.0
  pipe_diameters_by_type_m:
    building_connection: 0.2
    street_segment: 0.8
  
  # Demand and capacity settings
  building_heat_demand_unit: "kWh_per_year"
  heat_source_capacity_unit: "kWh_per_year"
  assume_continuous_operation_h_per_year: 2000
  
  # Edge types to convert to pipes
  edge_types_as_pipes: ["street_segment", "building_connection", "heat_source_connection"]
  
  # Output paths
  output_paths:
    pandapipes_net_json_path: "./data/pandapipes/network.json"
    pandapipes_dump_dir: "./data/pandapipes/"
    pipe_results_geojson: "./data/pandapipes/pipe_results.geojson"
    junction_results_csv: "./data/pandapipes/junction_results.csv"
    pipe_results_csv: "./data/pandapipes/pipe_results.csv"
    heat_exchanger_results_csv: "./data/pandapipes/heat_exchanger_results.csv"
    supply_circuit_geojson: "./data/pandapipes/supply_circuit.geojson"
    return_circuit_geojson: "./data/pandapipes/return_circuit.geojson"
  
  # Pipeflow solver settings
  pipeflow:
    # Note: Sequential mode solves hydraulics + heat transfer
    tol: 1.0e-2  # Tolerance for convergence
    max_iter_hyd: 200  # Max hydraulic iterations
    max_iter_therm: 2000  # Max thermal iterations
    check_connectivity: true  # Verify network connectivity before solving
  
  # Result validation thresholds
  validation:
    # Pressure bounds (absolute pressure in bar)
    min_pressure_bar: 1.0        # Below = cavitation risk
    max_pressure_bar: 25.0       # Above = safety concern
    critical_min_pressure_bar: 0.0  # Below = physically impossible
    
    # Velocity bounds (m/s)
    min_velocity_m_per_s: 0.1    # Below = stagnation
    max_velocity_m_per_s: 3.0    # Above = erosion/noise
    
    # Temperature checks
    min_temperature_K: 273.15    # 0°C - below = physically impossible (ice)
    
    # Numerical checks
    check_for_nan: true
    check_for_inf: true



